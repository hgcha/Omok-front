{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HyungGeun\\\\Documents\\\\omok-front\\\\src\\\\Chat.js\",\n  _s = $RefreshSig$();\nimport React, { useCallback, useRef, useState, useEffect } from 'react';\nimport { createGlobalStyle } from 'styled-components';\nimport reset from 'styled-reset';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Chat = () => {\n  _s();\n  const [msg, setMsg] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [chatt, setChatt] = useState([]);\n  const [chkLog, setChkLog] = useState(false);\n  const [socketData, setSocketData] = useState();\n  const ws = useRef(null); //webSocket�� ��� ����, \n  //������Ʈ�� ����� �� ��ü�� �����Ǿ���ϹǷ� 'ref'�� ����\n\n  const msgBox = chatt.map((item, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: item.name === name ? 'me' : 'other',\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      children: /*#__PURE__*/_jsxDEV(\"b\", {\n        children: item.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 19\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 13\n    }, this), \" [ \", item.date, \" ]\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 60\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      children: item.msg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 13\n    }, this)]\n  }, idx, true, {\n    fileName: _jsxFileName,\n    lineNumber: 17,\n    columnNumber: 9\n  }, this));\n  useEffect(() => {\n    if (socketData !== undefined) {\n      const tempData = chatt.concat(socketData);\n      console.log(tempData);\n      setChatt(tempData);\n    }\n  }, [socketData]);\n  const GlobalStyle = createGlobalStyle`  //css �ʱ�ȭ�� �� component\n        ${reset}\n    `;\n\n  //webSocket\n  //webSocket\n  //webSocket\n  //webSocket\n  //webSocket\n  //webSocket\n  const onText = event => {\n    console.log(event.target.value);\n    setMsg(event.target.value);\n  };\n  const webSocketLogin = useCallback(() => {\n    ws.current = new WebSocket(\"ws://localhost:8080/socket/chatt\");\n    ws.current.onmessage = message => {\n      const dataSet = JSON.parse(message.data);\n      setSocketData(dataSet);\n    };\n  });\n  const send = useCallback(() => {\n    if (!chkLog) {\n      if (name === \"\") {\n        alert(\"�̸��� �Է��ϼ���.\");\n        document.getElementById(\"name\").focus();\n        return;\n      }\n      webSocketLogin();\n      setChkLog(true);\n    }\n    if (msg !== '') {\n      const data = {\n        name,\n        msg,\n        date: new Date().toLocaleString()\n      }; //���� ������(JSON)\n\n      const temp = JSON.stringify(data);\n      if (ws.current.readyState === 0) {\n        //readyState�� �� ���� ���� ���¸� ��Ÿ��\n        ws.current.onopen = () => {\n          //webSocket�� �ξ����� �� ��, ����\n          console.log(ws.current.readyState);\n          ws.current.send(temp);\n        };\n      } else {\n        ws.current.send(temp);\n      }\n    } else {\n      alert(\"�޼����� �Է��ϼ���.\");\n      document.getElementById(\"msg\").focus();\n      return;\n    }\n    setMsg(\"\");\n  });\n  //webSocket\n  //webSocket\n  //webSocket\n  //webSocket\n  //webSocket\n  //webSocket\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(GlobalStyle, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"chat-wrap\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"chatt\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          id: \"title\",\n          children: \"WebSocket Chatting\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"talk\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"talk-shadow\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 25\n          }, this), msgBox]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          disabled: chkLog,\n          placeholder: \"\\uFFFD\\u0338\\uFFFD\\uFFFD\\uFFFD \\uFFFD\\u0537\\uFFFD\\uFFFD\\u03FC\\uFFFD\\uFFFD\\uFFFD.\",\n          type: \"text\",\n          id: \"name\",\n          value: name,\n          onChange: event => setName(event.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"sendZone\",\n          children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n            id: \"msg\",\n            value: msg,\n            onChange: onText,\n            onKeyDown: ev => {\n              if (ev.keyCode === 13) {\n                send();\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"button\",\n            value: \"\\uFFFD\\uFFFD\\uFFFD\\uFFFD\",\n            id: \"btnSend\",\n            onClick: send\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n_s(Chat, \"YKxtv8nLFH9trLuvtUQNXkQ8Gc8=\");\n_c = Chat;\nexport default Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useCallback","useRef","useState","useEffect","createGlobalStyle","reset","jsxDEV","_jsxDEV","Fragment","_Fragment","Chat","_s","msg","setMsg","name","setName","chatt","setChatt","chkLog","setChkLog","socketData","setSocketData","ws","msgBox","map","item","idx","className","children","fileName","_jsxFileName","lineNumber","columnNumber","date","undefined","tempData","concat","console","log","GlobalStyle","onText","event","target","value","webSocketLogin","current","WebSocket","onmessage","message","dataSet","JSON","parse","data","send","alert","document","getElementById","focus","Date","toLocaleString","temp","stringify","readyState","onopen","id","disabled","placeholder","type","onChange","onKeyDown","ev","keyCode","onClick","_c","$RefreshReg$"],"sources":["C:/Users/HyungGeun/Documents/omok-front/src/Chat.js"],"sourcesContent":["import React, { useCallback, useRef, useState, useEffect } from 'react';\r\nimport {createGlobalStyle} from 'styled-components';\r\nimport reset from 'styled-reset';\r\n\r\n\r\nconst Chat = () => {\r\n    const [msg, setMsg] = useState(\"\");\r\n    const [name, setName] = useState(\"\");\r\n    const [chatt, setChatt] = useState([]);\r\n    const [chkLog, setChkLog] = useState(false);\r\n    const [socketData, setSocketData] = useState();\r\n\r\n    const ws = useRef(null);    //webSocket�� ��� ����, \r\n                                //������Ʈ�� ����� �� ��ü�� �����Ǿ���ϹǷ� 'ref'�� ����\r\n\r\n    const msgBox = chatt.map((item, idx) => (\r\n        <div key={idx} className={item.name === name ? 'me' : 'other'}>\r\n            <span><b>{item.name}</b></span> [ {item.date} ]<br/>\r\n            <span>{item.msg}</span>\r\n        </div>\r\n    ));\r\n\r\n    useEffect(() => {\r\n        if(socketData !== undefined) {\r\n            const tempData = chatt.concat(socketData);\r\n            console.log(tempData);\r\n            setChatt(tempData);\r\n        }\r\n    }, [socketData]);\r\n\r\n\r\n    const GlobalStyle = createGlobalStyle`  //css �ʱ�ȭ�� �� component\r\n        ${reset}\r\n    `;\r\n\r\n\r\n    //webSocket\r\n    //webSocket\r\n    //webSocket\r\n    //webSocket\r\n    //webSocket\r\n    //webSocket\r\n    const onText = event => {\r\n        console.log(event.target.value);\r\n        setMsg(event.target.value);\r\n    }\r\n\r\n    \r\n    const webSocketLogin = useCallback(() => {\r\n        ws.current = new WebSocket(\"ws://localhost:8080/socket/chatt\");\r\n\r\n        ws.current.onmessage = (message) => {\r\n            const dataSet = JSON.parse(message.data);\r\n            setSocketData(dataSet);\r\n        }\r\n    });\r\n\r\n\r\n    const send = useCallback(() => {\r\n        if(!chkLog) {\r\n            if(name === \"\") {\r\n                alert(\"�̸��� �Է��ϼ���.\");\r\n                document.getElementById(\"name\").focus();\r\n                return;\r\n            }\r\n            webSocketLogin();\r\n            setChkLog(true);\r\n        }\r\n\r\n        if(msg !== ''){\r\n            const data = {\r\n                name,\r\n                msg,\r\n                date: new Date().toLocaleString(),\r\n            };  //���� ������(JSON)\r\n\r\n            const temp = JSON.stringify(data);\r\n            \r\n            if(ws.current.readyState === 0) {   //readyState�� �� ���� ���� ���¸� ��Ÿ��\r\n                ws.current.onopen = () => { //webSocket�� �ξ����� �� ��, ����\r\n                    console.log(ws.current.readyState);\r\n                    ws.current.send(temp);\r\n                }\r\n            }else {\r\n                ws.current.send(temp);\r\n            }\r\n        }else {\r\n            alert(\"�޼����� �Է��ϼ���.\");\r\n            document.getElementById(\"msg\").focus();\r\n            return;\r\n        }\r\n        setMsg(\"\");\r\n    });\r\n    //webSocket\r\n    //webSocket\r\n    //webSocket\r\n    //webSocket\r\n    //webSocket\r\n    //webSocket\r\n\r\n\r\n    \r\n    return (\r\n        <>\r\n            <GlobalStyle/>\r\n            <div id=\"chat-wrap\">\r\n                <div id='chatt'>\r\n                    <h1 id=\"title\">WebSocket Chatting</h1>\r\n                    <br/>\r\n                    <div id='talk'>\r\n                        <div className='talk-shadow'></div>\r\n                        {msgBox}\r\n                    </div>\r\n                    <input disabled={chkLog}\r\n                        placeholder='�̸��� �Է��ϼ���.' \r\n                        type='text' \r\n                        id='name' \r\n                        value={name} \r\n                        onChange={(event => setName(event.target.value))}/>\r\n                    <div id='sendZone'>\r\n                        <textarea id='msg' value={msg} onChange={onText}\r\n                            onKeyDown={(ev) => {if(ev.keyCode === 13){send();}}}></textarea>\r\n                        <input type='button' value='����' id='btnSend' onClick={send}/>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Chat;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}